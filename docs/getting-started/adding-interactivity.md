---
description: |
    ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’çŠ ç‰²ã«ã™ã‚‹ã“ã¨ãªãã€JavaScriptãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ€§ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
    ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã®å¼·åŠ›ãªã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå¿«é©ãªä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚
---

ã“ã‚Œã¾ã§ã€ãƒ‡ãƒ¢ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã©ã®ãƒšãƒ¼ã‚¸ã«ã‚‚ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚
JavaScript ã§ã™ã€‚ã“ã‚Œã¯å¼¾åŠ›æ€§ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é¢ã§ã¯ç´ æ™´ã‚‰ã—ã„ã“ã¨ã§ã™ãŒã€æ¬¡ã®ã‚ˆã†ãªåˆ¶é™ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã®å¯èƒ½æ€§ å¤šãã®ç¾ä¸–ä»£ã‚¦ã‚§ãƒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã® JavaScript ã®é…å¸ƒã‚’è¡Œã‚ãªã„ã‹ã€ã¾ãŸã¯ã€JavaScript ã®é…å¸ƒã‚’è¡Œã†ã‹ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚’ãƒšãƒ¼ã‚¸å…¨ä½“ã®ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

ã“ã‚Œã¯ã‚ã¾ã‚ŠæŸ”è»Ÿã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç‰¹ã«ã€ã»ã¨ã‚“ã©ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ãƒ¬ãƒ³ãƒ€ãƒ©ã«ã¯
ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ€§ã‚’å¿…è¦ã¨ã™ã‚‹å°ã•ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚ä¾‹ãˆã°ã€ãã†ã§ãªã„å ´åˆã¯
é™çš„ãªãƒšãƒ¼ã‚¸ã§ã¯ã€ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚„ç”»åƒç·¨é›†ã®ãŸã‚ã« JavaScript ãŒå¿…è¦ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
"ä»Šã™ãè²·ã† "ãƒœã‚¿ãƒ³ã€‚ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚
[å³¶å¶¼éƒ¨å»ºç¯‰][å³¶å¶¼éƒ¨-å»ºç¯‰]ã§ã™ã€‚ã‚’æŒã¤ãƒšãƒ¼ã‚¸ã‚’æŒ‡ã—ã¾ã™ã€‚
é™çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æµ·ã«ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå°ã•ãª "å³¶ "ã‚’ä½œã‚‹ã€‚

Fresh ã¯ã“ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ãŒã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ãŒã€ãã®éš›
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã‚‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã€Œå³¶ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã‚’è¡Œã†ã«ã¯
ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ç‰¹åˆ¥ãª `islands/` ãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ãã‚Œãã‚Œ
ã¯ã€1 ã¤ã®å³¶ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åç§°ã¯
[ãƒ‘ã‚¹ã‚«ãƒ«ã‚±ãƒ¼ã‚¹][ãƒ‘ã‚¹ã‚«ãƒ«ã‚±ãƒ¼ã‚¹]ã¾ãŸã¯[ã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹][ã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹]å³¶ã®åå‰
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«
islands/Counter.tsx`ã¨ãªã‚Šã¾ã™ã€‚ä»Šã™ãè²·ã†ãƒœã‚¿ãƒ³ã¯ã€æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã§ãã¾ã™ã€‚
`islands/buy-now-button.tsx` ã§ã™ã€‚

ä»¥ä¸‹ã¯ã€ç‰¹å®šã®æ™‚é–“ã¾ã§ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã™ã‚‹å³¶ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¾‹ã§ã™ã€‚

``tsx
// islands/Countdown.tsx

import { useEffect, useState } from 'preact/hooks'.

const timeFmt = new Intl.RelativeTimeFormat('en-US')

// ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®æ—¥ä»˜ã¯ `Date` ã§ã¯ãªãã€æ–‡å­—åˆ—ã¨ã—ã¦æ¸¡ã•ã‚Œã¾ã™ã€‚
// ã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® props ã¯ã€JSONï¼ˆãƒ‡ï¼‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯èƒ½ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–¢æ•° Countdown(props: { target: string }) { ...
const target = new Date(props.target)
const [now, setNow] = useState(new Date())

    // 1ç§’ã”ã¨ã« `now` ã®æ—¥ä»˜ã‚’æ›´æ–°ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®šã—ã€ç¾åœ¨ã®
    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹é™ã‚Šã€æ—¥ä»˜ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
    useEffect(() => {)
        const timer = setInterval(() => {
            setNow((now) => {
                if (now > target) {
                    clearInterval(timer)
                }
                return new Date()
            })
        }, 1000)
        return () => clearInterval(timer)
    }, [props.target])

    // If the target date has passed, we stop counting down.
    if (now > target) {
        return <span>ğŸ‰</span>
    }

    // Otherwise, we format the remaining time using `Intl.RelativeTimeFormat` and
    // render it.
    const secondsLeft = Math.floor((target.getTime() - now.getTime()) / 1000)
    return <span>{timeFmt.format(secondsLeft, 'seconds')}</span>

}

````

To include this in a page component, one can just use the component normally.
Fresh will take care of automatically mounting the island component on the
client with the correct props:

```tsx
// routes/countdown.tsx

import Countdown from '../islands/Countdown.tsx'

ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–¢æ•°Page() {
    const date = new Date()
    date.setHours(date.getHours() + 1)
    è¿”ã™
        <p>
            ãƒ“ãƒƒã‚°ã‚¤ãƒ™ãƒ³ãƒˆãŒèµ·ã“ã‚‹ <ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ target={date.toISOString()} />ã€‚
            .
        </p>
    )
}
````

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãƒšãƒ¼ã‚¸ã«ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

[ã‚¢ã‚¤ãƒ©ãƒ³ã‚º-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼]: https://jasonformat.com/islands-architecture
[ãƒ‘ã‚¹ã‚«ãƒ«ã‚±ãƒ¼ã‚¹ã€‘ï¼šhttps://en.wiktionary.org/wiki/pascal_case [ã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹]: https://en.wiktionary.org/wiki/kebab_case
